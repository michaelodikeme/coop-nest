# ================================================================
# Coop Nest - Production Environment Variables Template
# ================================================================
# Copy this file to .env.docker on your VPS and fill in real values
# NEVER commit .env.docker with real secrets to version control
# ================================================================

# ===================
# PostgreSQL Database
# ===================
POSTGRES_USER=coopnest_user
POSTGRES_PASSWORD=REPLACE_WITH_STRONG_PASSWORD_MIN_32_CHARS
POSTGRES_DB=coopnest_production

# Example strong password generation:
# openssl rand -base64 32

# ===================
# Application URLs
# ===================
# External URLs (what users access)
APPLICATION_URL=https://yourdomain.com
NEXT_PUBLIC_API_URL=https://api.yourdomain.com

# ===================
# Port Configuration
# ===================
# Internal container ports (should match docker-compose.prod.yml)
SERVER_PORT=8081
CLIENT_PORT=8080

# ===================
# CORS Configuration
# ===================
# Comma-separated list of allowed origins (no spaces between origins)
# Include both with and without www subdomain
# IMPORTANT: Use HTTPS in production, not HTTP
CORS_ORIGINS=https://yourdomain.com,https://www.yourdomain.com

# ===================
# JWT Authentication
# ===================
# Generate secure secrets with: openssl rand -hex 64
JWT_SECRET=REPLACE_WITH_64_CHAR_HEX_STRING
JWT_REFRESH_SECRET=REPLACE_WITH_DIFFERENT_64_CHAR_HEX_STRING
JWT_ACCESS_EXPIRY=1h
JWT_REFRESH_EXPIRY=7d

# Example generation:
# openssl rand -hex 64

# ===================
# Redis Configuration
# ===================
# For docker-compose internal network (no password)
REDIS_URL=redis://redis:6379

# If you add Redis password (recommended for production):
# REDIS_PASSWORD=your_strong_redis_password
# REDIS_URL=redis://:your_strong_redis_password@redis:6379

# ===================
# Node Environment
# ===================
NODE_ENV=production

# ===================
# Twilio (SMS/OTP)
# ===================
# Sign up at: https://www.twilio.com/
TWILIO_PHONE_NUMBER=+1234567890
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_VERIFICATION_SERVICE_SID=VAxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
OTP_EXPIRY_TIME=600000

# ===================
# Bank Verification API
# ===================
BANK_VERIFICATION_API_URL=https://nubapi.com/api/verify
BANK_VERIFICATION_TOKEN=your_bank_verification_token_here

# ===================
# Rate Limiting
# ===================
ENABLE_RATE_LIMIT=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ===================
# CORS Configuration
# ===================
# Already handled via APPLICATION_URL
# Backend will allow requests from APPLICATION_URL

# ===================
# Session Configuration
# ===================
# Generate with: openssl rand -hex 32
SESSION_SECRET=REPLACE_WITH_32_CHAR_HEX_STRING

# ===================
# Email Configuration (Optional)
# ===================
# If you plan to send emails
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASS=your_app_password
# EMAIL_FROM=noreply@yourdomain.com

# ===================
# Monitoring & Logging (Optional)
# ===================
# Sentry for error tracking
# SENTRY_DSN=https://xxx@sentry.io/xxx

# LogRocket or similar
# LOGROCKET_APP_ID=your_app_id

# ===================
# File Upload (Optional)
# ===================
# If using cloud storage for file uploads
# AWS_ACCESS_KEY_ID=your_aws_access_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret_key
# AWS_REGION=us-east-1
# AWS_S3_BUCKET=your-bucket-name

# ===================
# Backup Configuration (Optional)
# ===================
# For automated remote backups
# BACKUP_S3_BUCKET=your-backup-bucket
# BACKUP_RETENTION_DAYS=30

# ================================================================
# SECURITY CHECKLIST
# ================================================================
# [ ] All passwords are strong (32+ characters)
# [ ] All secrets are randomly generated
# [ ] JWT secrets are different from each other
# [ ] POSTGRES_PASSWORD is not 'rootuser'
# [ ] File permissions set to 600 (chmod 600 .env.docker)
# [ ] This file is NOT committed to version control
# [ ] Redis password enabled (optional but recommended)
# [ ] HTTPS URLs configured correctly
# [ ] Twilio credentials are valid
# [ ] Bank verification token is valid
# ================================================================

# ================================================================
# DEPLOYMENT CHECKLIST
# ================================================================
# [ ] Copy this file to /opt/coop-nest-app/.env.docker on VPS
# [ ] Replace all REPLACE_WITH_* placeholders
# [ ] Set correct domain URLs
# [ ] chmod 600 /opt/coop-nest-app/.env.docker
# [ ] Test docker-compose up with this file
# [ ] Verify application starts correctly
# [ ] Verify database connection works
# [ ] Verify Redis connection works
# ================================================================
